---
sidebar: sidebar 
permalink: migration/shift-toolkit-migration.html 
keywords: netapp, vmware, esxi, vm, migration, openshift, virtualization, hyper-v, proxmox, shift, toolkit 
summary: Verwenden Sie das Shift Toolkit, um VMs zwischen Virtualisierungsplattformen zu migrieren.  Der Prozess umfasst die Vorbereitung der VMs, die Konvertierung der Festplattenformate und die Konfiguration der Netzwerkeinstellungen in der Zielumgebung. 
---
= Migrieren Sie VMs mit dem Shift Toolkit
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
Verwenden Sie das Shift Toolkit, um VMs zwischen Virtualisierungsplattformen zu migrieren.  Der Prozess umfasst die Vorbereitung der VMs, die Konvertierung der Festplattenformate und die Konfiguration der Netzwerkeinstellungen in der Zielumgebung.



== Unterstützte Migrationen

Das Shift Toolkit bietet Flexibilität in Multi-Hypervisor-Umgebungen durch die Unterstützung bidirektionaler Migrationen zwischen den folgenden Hypervisoren:

* link:shift-toolkit-migrate-esxi2hyperv.html["VMware ESXi zu Microsoft Hyper-V"]
* link:shift-toolkit-migrate-hyperv2esxi.html["Microsoft Hyper-V zu VMware ESXi"]
* link:shift-toolkit-migrate-esxi2olvm.html["VMware ESXi zu Oracle Linux Virtualization Manager (OLVM)"]
* link:shift-toolkit-migrate-esxi2osv.html["VMware ESXi zu Red Hat OpenShift Virtualisierung"]




== Migrationsworkflow

Nachdem ein Entwurf erstellt wurde, kann der Migrationsprozess gestartet werden.  Während der Migration führt das Shift Toolkit eine Reihe von Schritten durch, um Festplattenformate zu konvertieren und virtuelle Maschinen auf dem Zielhost gemäß der Blaupause zu erstellen.

Das Shift Toolkit führt während der Migration die folgenden Schritte aus:

. Löschen Sie vorhandene Snapshots für alle VMs im Blueprint
. VM-Snapshots für die Blaupause an der Quelle auslösen
. Volume-Snapshot vor der Datenträgerkonvertierung auslösen
. Klonen und konvertieren Sie VMDK für alle VMs in das VHDx-Format
. Schalten Sie die VMs in der Schutzgruppe am Ziel ein.
. Registrieren Sie die Netzwerke auf jeder VM
. Entfernen Sie VMware Tools und weisen Sie IP-Adressen mithilfe von Trigger-Skripten oder Cronjobs je nach Betriebssystemtyp zu.




== Netzwerktipps und Überlegungen

Berücksichtigen Sie bei der Planung Ihrer Migration die folgenden Netzwerkanforderungen und -verhaltensweisen.  Das Shift Toolkit kopiert automatisch die Netzwerkeinstellungen von den Quell-VMs und wendet sie auf die migrierten VMs an, allerdings können die Benennung der Schnittstellen und die Konfigurationen der Netzwerkadapter zwischen Windows- und Linux-Systemen variieren.

.Allgemeine Anforderungen
* Stellen Sie sicher, dass statische IP-Adressen verfügbar und nicht einer anderen VM zugewiesen sind.


.Windows-VMs
* Das Vorbereitungsskript kopiert Netzwerkkonfigurationsdetails (IP-Adressraum, Gateway-Adresse, DNS-Server).
* Das Trigger-Skript wendet die Netzwerkeinstellungen während der Migration für einzelne oder mehrere Netzwerkkarten basierend auf der Blueprint-Zuordnung erneut an.
* Nach der Migration zeigt der Windows Geräte-Manager möglicherweise noch alte Netzwerkadapterinformationen aus der Zeit vor der Migration an. Dies hat jedoch keine Auswirkungen auf den neuen Adapter und verursacht keine IP-Konflikte.
* Aktualisieren Sie auf Version 4.0, um verwaiste Netzwerkgeräte automatisch aus der Registrierung und dem Geräte-Manager zu entfernen.


.Linux-VMs
* Das Vorbereitungsskript kopiert Netzwerkkonfigurationsdetails (IP-Adressraum, Routen, DNS-Server, Netzwerkgerätenamen).
* Das Skript ermittelt den Netzwerktyp der Linux-Distribution und wendet die entsprechenden IP-Einstellungen an.
* Das Skript zur Netzwerkneuzuordnung ist als Cronjob über crontab konfiguriert und wird beim Systemstart ausgeführt.
* Das Skript wendet die Netzwerkeinstellungen für einzelne oder mehrere Netzwerkkarten basierend auf der Blueprint-Zuordnung erneut an.


.Schnittstellenbenennung
* Konvertierte VMs können Schnittstellennamen wie folgt haben: `eth0` oder `ensp0` anstelle der Quellschnittstellennamen (zum Beispiel `ens192` oder `ens33` )
* Das Skript aktualisiert die Netzwerkkonfigurationsdetails, sodass sie den neuen Schnittstellennamen entsprechen.
* Werden vorhersehbare Namen mit korrekten udev-Abgleichsregeln verwendet und der Schnittstellenname auf dem Zielhypervisor beibehalten, überspringt das Skript die Netzwerkkonfiguration, entfernt VMware Tools und startet die VM neu.



NOTE: Mit dem Shift Toolkit können Netzwerkvorbereitungen überschrieben werden, sodass Administratoren benutzerdefinierte Skripte für die IP-Zuweisung oder andere Konfigurationen ausführen können.

.Unterstützte Netzwerkmechanismen
* Netzwerkmanager
* Netplan
* ifconfig
* böse


Das Shift Toolkit behält die im Blueprint festgelegten IP-Adressen bei.



== Migrationsphasen

Nachfolgend sind die Migrationsphasen aufgeführt, die Sie befolgen müssen, um VMs mithilfe des Shift Toolkits zu migrieren.

. *VM vorbereiten*: Bereiten Sie die VMs für die Migration vor und überprüfen Sie, ob alle Voraussetzungen erfüllt sind.
. *Migrieren und validieren*: Nach Abschluss der Vorbereitung migrieren Sie die VMware VMs auf den Ziel-Hypervisor.
+
Nach Abschluss der Migration überprüfen Sie, ob die VMs erfolgreich gestartet wurden und die Daten ordnungsgemäß migriert wurden.

. *Migration testen*: Der Migrationstest simuliert die Migration, indem er die VMDK-Datei in das entsprechende Format konvertiert und VMs mithilfe der konvertierten virtuellen Festplattendatei auf dem Qtree erstellt.
+
Die Testmigration beinhaltet keine Netzwerk-Mapping-Konfiguration; diese sollte manuell in einem Testnetzwerk durchgeführt werden.




NOTE: Das Shift Toolkit verändert die Quell-VM nicht, außer dass Skripte kopiert werden, die für die VM-Vorbereitung benötigt werden.  Dies ermöglicht ein schnelles Zurücksetzen im Falle von Konvertierungsfehlern.



== Führe eine Migration aus

Um den Migrationsworkflow mit der im Blueprint angegebenen Konfiguration auszulösen, klicken Sie auf *Migrieren*.

image::shift-toolkit-030.png[Dialog, der zeigt, wie eine VM-Migration ausgelöst wird]

Nach der Initiierung wird der Workflow aktiviert und der Konvertierungsprozess folgt den beschriebenen Schritten zur Registrierung der VM.  Falls die VMs innerhalb des Blueprints nicht ausgeschaltet sind, fordert das Shift Toolkit vor dem Fortfahren ein ordnungsgemäßes Herunterfahren an.

image::shift-toolkit-031.png[Bestätigung des Migrationsprozesses]


NOTE: NetApp empfiehlt, nicht mehr als zehn Konvertierungen parallel von derselben Quelle zum selben Ziel auszulösen.

image::shift-toolkit-032.png[Migrationsfortschritt]

Die Konvertierung von VMDK in ein beliebiges Dateiformat ist in Sekundenschnelle abgeschlossen, was dies zur schnellsten verfügbaren Option macht.  Dieser Ansatz trägt dazu bei, die Ausfallzeiten der VMs während der Migration zu reduzieren.

image::shift-toolkit-033.png[Fortschritt der Festplattenkonvertierung]

Sobald der Auftrag abgeschlossen ist, ändert sich der Blueprint-Status in „Migration abgeschlossen“.

image::shift-toolkit-034.png[Migrationsstatus abgeschlossen]
